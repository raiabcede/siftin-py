<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-theme="Green_Theme" class="selected"
	data-layout="vertical" data-boxed-layout="full" data-card="shadow">

	<head>
		@@include("partials/head.html")
		<title>New Capture - Siftin</title>
	</head>

	<body class="DEFAULT_THEME  bg-white dark:bg-dark">
		<main>
			<!--start the project-->
			<div id="main-wrapper" class="flex">

				<aside id="application-sidebar-brand"
					class="hs-overlay hs-overlay-open:translate-x-0 -translate-x-full xl:rtl:-translate-x-0 rtl:translate-x-full  left-0 rtl:left-auto rtl:right-0 transform hidden xl:block xl:translate-x-0 xl:end-auto xl:bottom-0 fixed top-0 with-vertical  left-sidebar transition-all duration-300 h-screen z-[2] flex-shrink-0 border-r rtl:border-l rtl:border-r-0 w-[270px] border-border dark:border-darkborder bg-white dark:bg-dark">
					@@include("partials/sidebar.html",{ "page": "sample page 1" })
				</aside>
				<div class="page-wrapper w-full" role="main">
					<!--  Header Start -->
					<header
						class="sticky top-header top-0 inset-x-0 z-[1] flex flex-wrap md:justify-start md:flex-nowrap text-sm bg-white dark:bg-dark ">
						<div
							class="with-vertical w-full">@@include("./partials/header.html")</div>
						<div class="with-horizontal w-full">
							<div class="bg-white dark:bg-dark shadow-md dark:shadow-dark-md">
								<div class="container">
									@@include("./partials/horizontal-header.html")
								</div>
							</div>
						</div>
					</header>
					<!--  Header End -->

					<!-- Horizontal Header Menu -->
					<aside class="with-horizontal lg:flex hidden">
						@@include("partials/horizontal-sidebar.html", { "page": "sample page 1",
						})
					</aside>
					<!-- Horizontal Header Menu End -->

					<!-- Main Content -->
					<main class="h-full max-w-full pt-6">
						<div class="container full-container py-5">
							<!-- Page Title -->
							<div class="mb-8">
								<h1 class="text-3xl font-bold text-dark dark:text-white mb-2">New Capture</h1>
								<p class="text-base text-link dark:text-darklink">Create a new LinkedIn lead capture run</p>
							</div>

							<!-- Step Progress Indicator -->
							<div class="mb-8">
								<div class="flex items-center justify-between">
									<!-- Step 1 -->
									<div class="flex items-center flex-1">
										<div class="flex items-center">
											<div id="step-1-indicator" class="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-semibold text-sm">1</div>
											<span id="step-1-label" class="ml-2 text-sm font-medium text-primary">Source</span>
										</div>
										<div id="step-1-line" class="flex-1 h-0.5 bg-gray-200 dark:bg-darkborder mx-4"></div>
									</div>

									<!-- Step 2 -->
									<div class="flex items-center flex-1">
										<div id="step-2-check" class="hidden"><i class="ti ti-check text-primary text-lg"></i></div>
										<div id="step-2-indicator" class="w-8 h-8 rounded-full bg-gray-200 dark:bg-darkborder text-gray-500 dark:text-gray-400 flex items-center justify-center font-semibold text-sm">2</div>
										<span id="step-2-label" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-400">AI Criteria</span>
										<div id="step-2-line" class="flex-1 h-0.5 bg-gray-200 dark:bg-darkborder mx-4"></div>
									</div>

									<!-- Step 3 -->
									<div class="flex items-center flex-1">
										<div id="step-3-check" class="hidden"><i class="ti ti-check text-primary text-lg"></i></div>
										<div id="step-3-indicator" class="w-8 h-8 rounded-full bg-gray-200 dark:bg-darkborder text-gray-500 dark:text-gray-400 flex items-center justify-center font-semibold text-sm">3</div>
										<span id="step-3-label" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-400">Preview & Select</span>
										<div id="step-3-line" class="flex-1 h-0.5 bg-gray-200 dark:bg-darkborder mx-4"></div>
									</div>

									<!-- Step 4 -->
									<div class="flex items-center">
										<div id="step-4-check" class="hidden"><i class="ti ti-check text-primary text-lg"></i></div>
										<div id="step-4-indicator" class="w-8 h-8 rounded-full bg-gray-200 dark:bg-darkborder text-gray-500 dark:text-gray-400 flex items-center justify-center font-semibold text-sm">4</div>
										<span id="step-4-label" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-400">Save & Export</span>
									</div>
								</div>
							</div>

							<!-- Step Content Card -->
							<div class="card shadow-lg">
								<div class="card-body p-8">
									<!-- Step 1: LinkedIn Source -->
									<div id="step-1-content" class="step-content">
										<h2 class="text-2xl font-bold text-dark dark:text-white mb-6">Step 1: LinkedIn Source</h2>
										
										<div class="mb-6">
											<label for="linkedin-url" class="block text-sm font-semibold text-dark dark:text-white mb-2">LinkedIn Search URL</label>
											<input 
												type="text" 
												id="linkedin-url" 
												class="w-full px-4 py-3 border border-border dark:border-darkborder rounded-md bg-white dark:bg-dark text-dark dark:text-white focus:outline-none focus:ring-2 focus:ring-primary" 
												placeholder="https://www.linkedin.com/search/results/people/..."
											/>
										</div>

										<div class="bg-lightinfo dark:bg-darkinfo border-l-4 border-primary p-4 rounded-md mb-6">
											<div class="flex items-start">
												<i class="ti ti-info-circle text-primary text-xl mr-3 mt-0.5"></i>
												<div>
													<p class="text-sm font-semibold text-dark dark:text-white mb-1">Example format:</p>
													<code class="text-xs text-link dark:text-darklink break-all">
														https://www.linkedin.com/search/results/people/?keywords=SDR%20manager&geoUrn=%5B%22103644278%22%5D
													</code>
												</div>
											</div>
										</div>

										<div class="flex justify-end">
											<button onclick="nextStep(2)" class="btn btn-primary flex items-center cursor-pointer">
												Continue <i class="ti ti-arrow-right ml-2"></i>
											</button>
										</div>
									</div>

									<!-- Step 2: AI Criteria -->
									<div id="step-2-content" class="step-content hidden">
										<h2 class="text-2xl font-bold text-dark dark:text-white mb-6">Step 2: Define AI Criteria</h2>
										
										<div class="mb-4">
											<label for="ai-criteria" class="block text-sm font-semibold text-dark dark:text-white mb-2">Describe the leads you want (natural language)</label>
											<textarea 
												id="ai-criteria" 
												rows="5" 
												class="w-full px-4 py-3 border border-border dark:border-darkborder rounded-md bg-white dark:bg-dark text-dark dark:text-white focus:outline-none focus:ring-2 focus:ring-primary resize-y" 
												placeholder="e.g., US-based SDR managers at B2B SaaS companies with 11-200 employees, preferably using HubSpot or Salesforce..."
											></textarea>
										</div>

										<div class="mb-6">
											<p class="text-sm font-semibold text-dark dark:text-white mb-3">Quick chips (click to insert):</p>
											<div class="flex flex-wrap gap-2">
												<button onclick="insertChip('US-based SDR managers at B2B SaaS (11-200), using HubSpot')" class="px-4 py-2 border border-border dark:border-darkborder text-dark dark:text-white rounded-md text-sm hover:border-primary dark:hover:border-primary transition-colors cursor-pointer">
													US-based SDR managers at B2B SaaS (11-200), using HubSpot
												</button>
												<button onclick="insertChip('Founders in fintech, Series A-B, NYC or remote')" class="px-4 py-2 border border-border dark:border-darkborder text-dark dark:text-white rounded-md text-sm hover:border-primary dark:hover:border-primary transition-colors cursor-pointer">
													Founders in fintech, Series A-B, NYC or remote
												</button>
												<button onclick="insertChip('VP Sales at enterprise software companies (500+ employees)')" class="px-4 py-2 border border-border dark:border-darkborder text-dark dark:text-white rounded-md text-sm hover:border-primary dark:hover:border-primary transition-colors cursor-pointer">
													VP Sales at enterprise software companies (500+ employees)
												</button>
												<button onclick="insertChip('Revenue Operations leaders at high-growth SaaS companies')" class="px-4 py-2 border border-border dark:border-darkborder text-dark dark:text-white rounded-md text-sm hover:border-primary dark:hover:border-primary transition-colors cursor-pointer">
													Revenue Operations leaders at high-growth SaaS companies
												</button>
											</div>
										</div>

										<div class="flex justify-between">
											<button onclick="prevStep(1)" class="btn btn-outline flex items-center cursor-pointer">
												<i class="ti ti-arrow-left mr-2"></i> Back
											</button>
											<button onclick="nextStep(3)" class="btn btn-primary flex items-center cursor-pointer">
												Preview Matches <i class="ti ti-arrow-right ml-2"></i>
											</button>
										</div>
									</div>

									<!-- Step 3: Preview & Select -->
									<div id="step-3-content" class="step-content hidden">
										<div class="flex justify-between items-center mb-6">
											<h2 class="text-2xl font-bold text-dark dark:text-white">Step 3: Preview & Select Leads</h2>
											<div class="flex items-center gap-4">
												<span class="text-sm text-link dark:text-darklink" id="lead-count">0 selected</span>
												<button onclick="selectAll()" class="px-4 py-2 border border-border dark:border-darkborder rounded-md text-sm text-dark dark:text-white hover:bg-primary hover:text-white dark:hover:bg-primary dark:hover:text-white cursor-pointer transition-colors">Select All</button>
												<button onclick="deselectAll()" class="px-4 py-2 border border-border dark:border-darkborder rounded-md text-sm text-dark dark:text-white hover:bg-primary hover:text-white dark:hover:bg-primary dark:hover:text-white cursor-pointer transition-colors">Deselect All</button>
											</div>
										</div>

										<div class="space-y-4 max-h-[600px] overflow-y-auto" id="leads-list">
											<!-- Leads will be dynamically inserted here -->
										</div>

										<div class="flex justify-between mt-6">
											<button onclick="prevStep(2)" class="btn btn-outline flex items-center cursor-pointer">
												<i class="ti ti-arrow-left mr-2"></i> Back
											</button>
											<button onclick="nextStep(4)" class="btn btn-primary flex items-center cursor-pointer" id="save-selection-btn" disabled>
												Save Selection <i class="ti ti-arrow-right ml-2"></i>
											</button>
										</div>
									</div>

									<!-- Step 4: Save & Export -->
									<div id="step-4-content" class="step-content hidden">
										<h2 class="text-2xl font-bold text-dark dark:text-white mb-6">Step 4: Save & Export</h2>
										
										<div class="mb-6">
											<label for="run-label" class="block text-sm font-semibold text-dark dark:text-white mb-2">Run Label</label>
											<input 
												type="text" 
												id="run-label" 
												class="w-full px-4 py-3 border border-border dark:border-darkborder rounded-md bg-white dark:bg-dark text-dark dark:text-white focus:outline-none focus:ring-2 focus:ring-primary" 
												value="Run - 10/31/2025 2:15:07 PM"
											/>
										</div>

										<div class="card bg-lightsecondary dark:bg-darksecondary mb-6">
											<div class="card-body">
												<h5 class="font-semibold text-dark dark:text-white mb-4">Summary</h5>
												<div class="space-y-2 text-sm">
													<div class="flex">
														<span class="text-link dark:text-darklink w-32">Source:</span>
														<span class="text-dark dark:text-white flex-1 break-all" id="summary-source">-</span>
													</div>
													<div class="flex">
														<span class="text-link dark:text-darklink w-32">Keywords:</span>
														<span class="text-dark dark:text-white flex-1" id="summary-keywords">-</span>
													</div>
													<div class="flex">
														<span class="text-link dark:text-darklink w-32">Criteria:</span>
														<span class="text-dark dark:text-white flex-1" id="summary-criteria">-</span>
													</div>
													<div class="flex">
														<span class="text-link dark:text-darklink w-32">Found:</span>
														<span class="text-dark dark:text-white flex-1" id="summary-found">-</span>
													</div>
													<div class="flex">
														<span class="text-link dark:text-darklink w-32">Selected:</span>
														<span class="text-dark dark:text-white flex-1" id="summary-selected">-</span>
													</div>
												</div>
											</div>
										</div>

										<div class="flex justify-between">
											<button onclick="prevStep(3)" class="btn btn-outline flex items-center cursor-pointer">
												<i class="ti ti-arrow-left mr-2"></i> Back
											</button>
											<div class="flex gap-3">
												<button onclick="saveToLibrary()" class="btn btn-outline flex items-center cursor-pointer">
													<i class="ti ti-file-text mr-2"></i> Save to Leads Library
												</button>
												<button onclick="saveAndExport()" class="btn btn-primary flex items-center cursor-pointer">
													<i class="ti ti-download mr-2"></i> Save & Export...
												</button>
											</div>
										</div>
									</div>

								</div>
							</div>

						</div>

					</main>
					<!-- Main Content End -->

				</div>
			</div>
			<!--end of project-->
		</main>
		@@include("partials/header-components/mobile-menu.html")
		@@include("partials/header-components/dd-searchbar.html")
		@@include("partials/header-components/dd-cart.html")
		@@include("partials/customizer.html")
		@@include("partials/scripts.html")
		
		<script>
			let currentStep = 1;
			let selectedLeads = [];
			const sampleLeads = [
				{ id: 1, name: "David Kim", title: "Senior SDR at CloudScale", company: "CloudScale", match: 87, description: "Strong fit for Cloud Infrastructure industry requirements", location: "Seattle, WA", image: "@@webRoot/assets/images/profile/user-1.jpg" },
				{ id: 2, name: "Christopher Taylor", title: "Senior Business Development Rep", company: "TechSolutions", match: 68, description: "aligns with search criteria", location: "Las Vegas, NV", image: "@@webRoot/assets/images/profile/user-2.jpg" },
				{ id: 3, name: "Leo Martínez", title: "RevOps Lead", company: "GrowthForge", match: 65, description: "Strong fit for SaaS industry requirements", location: "Austin, TX", image: "@@webRoot/assets/images/profile/user-3.jpg" },
				{ id: 4, name: "Brian Anderson", title: "Lead Generation Specialist", company: "MarketPro", match: 90, description: "Strong fit for Marketing Tech industry requirements", location: "Minneapolis, MN", image: "@@webRoot/assets/images/profile/user-4.jpg" },
				{ id: 5, name: "Priya Shah", title: "Head of Sales Development", company: "FinPilot", match: 77, description: "Matches \"Founders\" criteria at FinPilot", location: "Remote (US)", image: "@@webRoot/assets/images/profile/user-5.jpg" },
				{ id: 6, name: "Robert Wilson", title: "VP of Business Development", company: "ScaleUp", match: 93, description: "Company size (101-250) fits requirements", location: "Dallas, TX", image: "@@webRoot/assets/images/profile/user-6.jpg" },
				{ id: 7, name: "Megan Thomas", title: "Co-Founder & CRO", company: "SalesFlow", match: 86, description: "Company size (11-50) fits requirements", location: "Austin, TX", image: "@@webRoot/assets/images/profile/user-7.jpg" },
				{ id: 8, name: "James Chen", title: "SDR Manager", company: "TechFlow", match: 82, description: "Strong fit for B2B SaaS industry requirements", location: "San Francisco, CA", image: "@@webRoot/assets/images/profile/user-8.jpg" }
			];

			function updateStepIndicator(step) {
				// Reset all steps
				for (let i = 1; i <= 4; i++) {
					const indicator = document.getElementById(`step-${i}-indicator`);
					const label = document.getElementById(`step-${i}-label`);
					const check = document.getElementById(`step-${i}-check`);
					const line = document.getElementById(`step-${i}-line`);
					const content = document.getElementById(`step-${i}-content`);

					if (!indicator || !label) continue;

					if (i < step) {
						// Completed steps
						indicator.classList.add('hidden');
						if (check) check.classList.remove('hidden');
						label.classList.remove('text-gray-500', 'dark:text-gray-400');
						label.classList.add('text-primary');
						if (line) line.classList.remove('bg-gray-200', 'dark:bg-darkborder');
						if (line) line.classList.add('bg-primary');
						if (content) content.classList.add('hidden');
					} else if (i === step) {
						// Current step
						indicator.classList.remove('hidden', 'bg-gray-200', 'dark:bg-darkborder', 'text-gray-500', 'dark:text-gray-400');
						indicator.classList.add('bg-primary', 'text-white');
						if (check) check.classList.add('hidden');
						label.classList.remove('text-gray-500', 'dark:text-gray-400');
						label.classList.add('text-primary');
						if (content) content.classList.remove('hidden');
					} else {
						// Future steps
						indicator.classList.remove('bg-primary', 'text-white');
						indicator.classList.add('bg-gray-200', 'dark:bg-darkborder', 'text-gray-500', 'dark:text-gray-400');
						if (check) check.classList.add('hidden');
						label.classList.remove('text-primary');
						label.classList.add('text-gray-500', 'dark:text-gray-400');
						if (line) line.classList.remove('bg-primary');
						if (line) line.classList.add('bg-gray-200', 'dark:bg-darkborder');
						if (content) content.classList.add('hidden');
					}
				}
			}

			function nextStep(step) {
				if (step === 3) {
					// Generate leads list when moving to step 3
					generateLeadsList();
				}
				if (step === 4) {
					// Update summary when moving to step 4
					updateSummary();
				}
				currentStep = step;
				updateStepIndicator(step);
			}

			function prevStep(step) {
				currentStep = step;
				updateStepIndicator(step);
			}

			function insertChip(text) {
				const textarea = document.getElementById('ai-criteria');
				if (!textarea) return;
				const currentText = textarea.value;
				textarea.value = currentText ? currentText + ' ' + text : text;
				textarea.focus();
			}

			function generateLeadsList() {
				const leadsList = document.getElementById('leads-list');
				if (!leadsList) return;
				leadsList.innerHTML = '';
				selectedLeads = [];

				sampleLeads.forEach(lead => {
					const leadCard = document.createElement('div');
					leadCard.className = 'card border border-border dark:border-darkborder hover:border-primary transition-colors';
					leadCard.innerHTML = `
						<div class="card-body p-4">
							<div class="flex items-start gap-4">
								<input type="checkbox" class="mt-2 lead-checkbox cursor-pointer" data-lead-id="${lead.id}" onchange="toggleLead(${lead.id})">
								<img src="${lead.image}" alt="${lead.name}" class="w-12 h-12 rounded-full object-cover">
								<div class="flex-1">
									<div class="flex items-center gap-2 mb-1">
										<h5 class="font-semibold text-dark dark:text-white">${lead.name}</h5>
										<span class="px-2 py-1 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded text-xs font-semibold">${lead.match}%</span>
									</div>
									<p class="text-sm text-link dark:text-darklink mb-1">${lead.title} at ${lead.company}</p>
									<p class="text-sm text-dark dark:text-white mb-1">${lead.description}</p>
									<p class="text-sm text-link dark:text-darklink">${lead.location}</p>
								</div>
							</div>
						</div>
					`;
					leadsList.appendChild(leadCard);
				});

				updateLeadCount();
			}

			function toggleLead(leadId) {
				const index = selectedLeads.indexOf(leadId);
				if (index > -1) {
					selectedLeads.splice(index, 1);
				} else {
					selectedLeads.push(leadId);
				}
				updateLeadCount();
			}

			function selectAll() {
				selectedLeads = sampleLeads.map(lead => lead.id);
				document.querySelectorAll('.lead-checkbox').forEach(cb => cb.checked = true);
				updateLeadCount();
			}

			function deselectAll() {
				selectedLeads = [];
				document.querySelectorAll('.lead-checkbox').forEach(cb => cb.checked = false);
				updateLeadCount();
			}

			function updateLeadCount() {
				const count = selectedLeads.length;
				const leadCountEl = document.getElementById('lead-count');
				const saveBtn = document.getElementById('save-selection-btn');
				if (leadCountEl) leadCountEl.textContent = `${sampleLeads.length} found • ${count} selected`;
				if (saveBtn) saveBtn.disabled = count === 0;
			}

			function updateSummary() {
				const linkedinUrl = document.getElementById('linkedin-url');
				const aiCriteria = document.getElementById('ai-criteria');
				const summarySource = document.getElementById('summary-source');
				const summaryKeywords = document.getElementById('summary-keywords');
				const summaryCriteria = document.getElementById('summary-criteria');
				const summaryFound = document.getElementById('summary-found');
				const summarySelected = document.getElementById('summary-selected');
				
				if (summarySource) summarySource.textContent = linkedinUrl?.value || '-';
				if (summaryKeywords) summaryKeywords.textContent = 'SDR manager';
				if (summaryCriteria) summaryCriteria.textContent = aiCriteria?.value || '-';
				if (summaryFound) summaryFound.textContent = `${sampleLeads.length} leads`;
				if (summarySelected) summarySelected.textContent = `${selectedLeads.length} leads`;
			}

			function saveToLibrary() {
				alert('Saved to Leads Library!');
			}

			function saveAndExport() {
				alert('Save & Export dialog would open here');
			}

			// Initialize when DOM is ready
			if (document.readyState === 'loading') {
				document.addEventListener('DOMContentLoaded', () => updateStepIndicator(1));
			} else {
				updateStepIndicator(1);
			}
		</script>
	</body>

</html>